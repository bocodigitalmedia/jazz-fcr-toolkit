section#fcr(layout="column")

  //- ================================================================================================

  header(layout="row")
    span(ng-bind="form.title")

  //- ================================================================================================

  md-content(layout-padding)

    .view-dashboard-fcrs

      .fcr-form(ng-class="{ 'open': $root.Forms.formOpen, 'print': $root.Forms.formPrintable }")

        md-content.form-top(flex layout="row" layout-padding)

          .header.print-only.evaluatee-name(flex="100" layout="row" layout-align="start center")
            span {{ ctrl.data.evaluatee.email }}
          .header.print-only(layout="row" layout-align="end center")
            span(ng-if="ctrl.data.status == 'submitted'") In Review
            span(ng-if="ctrl.data.status != 'submitted'") {{ ctrl.data.status }}
            | &nbsp;{{ ctrl.data.timestamp | tsFormat }}

          .header(flex="70" layout="row" layout-align="start center")
            span(ng-if="ctrl.data.status == 'submitted'") In Review
            span(ng-if="ctrl.data.status != 'submitted'") {{ ctrl.data.status }}
            | &nbsp;{{ ctrl.data.timestamp | tsFormat }}
          div(flex)
          div(flex layout="row" layout-align="end center")
            md-button.md-raised.accept(ng-if="!$root.Users.loggedIn && $root.Users.active.group.level == 1 && ctrl.data.status == 'submitted'" ng-click="$root.Forms.acceptReject($event, 'completed')") Accept FCR
            md-button.md-raised.reject(ng-if="!$root.Users.loggedIn && $root.Users.active.group.level == 1 && ctrl.data.status == 'submitted'" ng-click="$root.Forms.acceptReject($event, 'rejected')") Reject FCR
            md-button.md-raised.download(ng-click="$root.Forms.download($root.Forms.selectedFormId)") Download

        div.form-body-wrapper
          md-content.form-body(flex layout="column" layout-padding)

            //----------------------------------------------------------------------------
            //- First Section

            section(layout="column")
              div(layout="row")
                .start(flex="33" layout="row")
                  md-input-container
                    label Field Ride Start Date
                    input(value="{{ ctrl.data.fieldRideStart | tsFormat }}" disabled)
                .end(flex="33" layout="row")
                  md-input-container
                    label Field Ride End Date
                    input(value="{{ ctrl.data.fieldRideEnd | tsFormat }}" disabled)
                .days(flex="33" layout="row")
                  md-input-container
                    label Total Contact Days
                    input(value="{{ ctrl.data.daysInField }}" disabled)
              div(layout="row")
                .calls(flex="33" layout="row")
                  md-input-container
                    label Total Calls Observed
                    input(value="{{ ctrl.data.overallCallsObserved }}" disabled)
                .last(flex="33" layout="row")
                  md-input-container
                    label Date of last FCR
                    input(value="{{ ctrl.data.timestamp | tsFormat }}" disabled)

            //----------------------------------------------------------------------------
            //- Alignment to Brand Strategy

            md-divider

            section(layout="column")
              h4 Alignment to Brand Strategy

              p
                strong Resource Most Utilized

              br

              md-content.comments(layout-padding) {{ ctrl.data.comments[0] }}
                span.no-data(ng-if="!ctrl.data.comments[0]") No Comments

              md-list

                md-list-item(layout="row")
                  span Target Product Delivery on Most Calls
                  span(flex)
                  span {{ ctrl.data.targetProductDelivery }}
                md-list-item(layout="row")
                  span Disease State Delivery on Most Calls
                  span(flex)
                  span {{ ctrl.data.diseaseStateDelivery }}
                md-list-item(layout="row")
                  span Gain Advance/Commitment
                  span(flex)
                  span {{ ctrl.data.gainAdvance }}
                md-list-item(layout="row")
                  span Immunization Belief Change Observed
                  span(flex)
                  span {{ ctrl.data.immunicationBelief }}
                md-list-item(layout="row")
                  span Transition to Additional Prod Discussion
                  span(flex)
                  span {{ ctrl.data.transitionAdditionalProdDiscussion }}
                md-list-item(layout="row")
                  span Disease State Delivery on Additional Product Discussions
                  span(flex)
                  span {{ ctrl.data.diseaseState2ndProd }}

              br

              div(layout="row")
                div(flex)
                div(flex="30" layout="column" layout-align="center center")
                  p.medium-type Rating 1-4
                  p.small-type Lowest - Highest

              md-list.no-na

                md-list-item(layout="row")
                  span Quality of Resource Usage
                  span(flex)
                  choices(ng-model="ctrl.data.answers[0]")
                md-list-item(layout="row")
                  span Quality of Account Full Portfolio Delivery
                  span(flex)
                  choices(ng-model="ctrl.data.answers[1]")
                md-list-item(layout="row")
                  span Quality of Disease State Delivery
                  span(flex)
                  choices(ng-model="ctrl.data.answers[2]")
                md-list-item(layout="row")
                  span Quality Call to Action
                  span(flex)
                  choices(ng-model="ctrl.data.answers[3]")

            //----------------------------------------------------------------------------
            //- Selling Ways

            md-divider

            section(layout="column")
              h4 Selling Ways

              div(layout="row")
                div(flex)
                div(flex="40" layout="column" layout-align="center center")
                  p.medium-type Rating 1-4
                  p.small-type Lowest - Highest

              md-list

                md-subheader Business Acumen

                md-list-item(layout="row")
                  span Diagnose
                  span(flex)
                  choices(ng-model="ctrl.data.answers[4]")
                md-list-item(layout="row")
                  span Build Your Plan | Resource Utilization
                  span(flex)
                  choices(ng-model="ctrl.data.answers[5]")
                md-list-item(layout="row")
                  span Execute &amp; Evaluate | Targeting/Routing
                  span(flex)
                  choices(ng-model="ctrl.data.answers[6]")

                md-subheader Scientific Knowledge

                md-list-item(layout="row")
                  span Disease State
                  span(flex)
                  choices(ng-model="ctrl.data.answers[7]")
                md-list-item(layout="row")
                  span Product
                  span(flex)
                  choices(ng-model="ctrl.data.answers[8]")
                md-list-item(layout="row")
                  span Promotion/Selling
                  span(flex)
                  choices(ng-model="ctrl.data.answers[9]")

                md-subheader Customer Engagement

                md-list-item(layout="row")
                  span Prepare to Sell
                  span(flex)
                  choices(ng-model="ctrl.data.answers[10]")
                md-list-item(layout="row")
                  span Open the Sales Call
                  span(flex)
                  choices(ng-model="ctrl.data.answers[11]")
                md-list-item(layout="row")
                  span Uncover Opportunities
                  span(flex)
                  choices(ng-model="ctrl.data.answers[12]")
                md-list-item(layout="row")
                  span Align Brand and Handle Objections
                  span(flex)
                  choices(ng-model="ctrl.data.answers[13]")
                md-list-item(layout="row")
                  span Close with Commitment
                  span(flex)
                  choices(ng-model="ctrl.data.answers[14]")
                md-list-item(layout="row")
                  span Total Office Call
                  span(flex)
                  choices(ng-model="ctrl.data.answers[15]")
                md-list-item(layout="row")
                  span Analyze Call and Plan Next Steps
                  span(flex)
                  choices(ng-model="ctrl.data.answers[16]")
                md-list-item(layout="row")
                  span Payer Pull Through
                  span(flex)
                  choices(ng-model="ctrl.data.answers[17]")

              h5.print-break Comments

              md-content.comments(layout-padding) {{ ctrl.data.comments[1] }}
                span.no-data(ng-if="!ctrl.data.comments[1]") No Comments

            //----------------------------------------------------------------------------
            //- Accountability

            md-divider

            section(layout="column")
              h4 Accountability

              div(layout="row")
                div(flex)
                div(flex="40" layout="column" layout-align="center center")
                  p.medium-type Rating 1-4
                  p.small-type Lowest - Highest

              md-list

                md-list-item(layout="row")
                  span Initiative / Seize Opportunity
                  span(flex)
                  choices(ng-model="ctrl.data.answers[18]")
                md-list-item(layout="row")
                  span Drive Performance
                  span(flex)
                  choices(ng-model="ctrl.data.answers[19]")
                md-list-item(layout="row")
                  span Coachability
                  span(flex)
                  choices(ng-model="ctrl.data.answers[20]")
                md-list-item(layout="row")
                  span Personal Development
                  span(flex)
                  choices(ng-model="ctrl.data.answers[21]")

              h5 Comments

              md-content.comments(layout-padding) {{ ctrl.data.comments[2] }}
                span.no-data(ng-if="!ctrl.data.comments[2]") No Comments

            //----------------------------------------------------------------------------
            //- Synergy & Partnership

            md-divider

            section(layout="column")
              h4 Synergy & Partnership

              div(layout="row")
                div(flex)
                div(flex="40" layout="column" layout-align="center center")
                  p.medium-type Rating 1-4
                  p.small-type Lowest - Highest

              md-list

                md-list-item(layout="row")
                  span Effective Collaboration
                  span(flex)
                  choices(ng-model="ctrl.data.answers[22]")
                md-list-item(layout="row")
                  span Builds Trust
                  span(flex)
                  choices(ng-model="ctrl.data.answers[23]")
                md-list-item(layout="row")
                  span Effective Communication
                  span(flex)
                  choices(ng-model="ctrl.data.answers[24]")

              h5 Comments

              md-content.comments(layout-padding) {{ ctrl.data.comments[3] }}
                span.no-data(ng-if="!ctrl.data.comments[3]") No Comments

            //----------------------------------------------------------------------------
            //- Administration

            md-divider

            section(layout="column")
              h4 Administration

              div(layout="row")
                div(flex)
                div(flex="40" layout="column" layout-align="center center")
                  p.medium-type Rating 1-4
                  p.small-type Lowest - Highest

              md-list

                md-list-item(layout="row")
                  span Expense Management
                  span(flex)
                  choices(ng-model="ctrl.data.answers[25]")
                md-list-item(layout="row")
                  span Sample/Resource Management
                  span(flex)
                  choices(ng-model="ctrl.data.answers[26]")
                md-list-item(layout="row")
                  span Fleet Management
                  span(flex)
                  choices(ng-model="ctrl.data.answers[27]")
                md-list-item(layout="row")
                  span Report Timeliness
                  span(flex)
                  choices(ng-model="ctrl.data.answers[28]")
                md-list-item(layout="row")
                  span Recording of Activity in CRM
                  span(flex)
                  choices(ng-model="ctrl.data.answers[29]")

              h5 Comments

              md-content.comments(layout-padding) {{ ctrl.data.comments[4] }}
                span.no-data(ng-if="!ctrl.data.comments[4]") No Comments

            //----------------------------------------------------------------------------
            //- Integrity

            md-divider

            section(layout="column")
              h4 Integrity

              md-list

                md-list-item(layout="row")
                  span Compliance
                  span(flex)
                  choices.yes-no(ng-model="ctrl.data.answers[30]")

              h5(ng-bind-html="::$root.locale.components.fcr.common.comments | trust")
              //- Comments

              md-content.comments(layout-padding) {{ ctrl.data.comments[5] }}
                span.no-data(ng-if="!ctrl.data.comments[5]" ng-bind-html="::$root.locale.global.noComments | trust")
                //- No Comments

            //----------------------------------------------------------------------------
            //- SMART Objectives

            md-divider

            section(layout="column")
              h4 SMART Objectives

              md-content.follow-up(layout="row" layout-align="start end")
                h5 SMART Objectives #1
                div(flex)
                p Follow Up Date:
                  span.date(ng-if="ctrl.data.followUp1") {{ ctrl.data.followUp1 | tsFormat }}
                  span.date(ng-if="!ctrl.data.followUp1") N/A

              md-content.comments(layout-padding) {{ ctrl.data.comments[6] }}
                span.no-data(ng-if="!ctrl.data.comments[6]") No Comments

              md-content.follow-up(layout="row" layout-align="start end")
                h5 SMART Objectives #2
                div(flex)
                p Follow Up Date:
                  span.date(ng-if="ctrl.data.followUp2") {{ ctrl.data.followUp2 | tsFormat }}
                  span.date(ng-if="!ctrl.data.followUp2") N/A

              md-content.comments(layout-padding) {{ ctrl.data.comments[7] }}
                span.no-data(ng-if="!ctrl.data.comments[7]") No Comments

            //----------------------------------------------------------------------------
            //- Territory/District Performance Discussion

            section(layout="column")
              h4 Territory/District Performance Discussion

              md-content.comments(layout-padding) {{ ctrl.data.comments[9] }}
                span.no-data(ng-if="!ctrl.data.comments[9]") No Comments

            //----------------------------------------------------------------------------
            //- Overall Comments

            section(layout="column")
              h4 Overall Comments

              md-content.comments(layout-padding) {{ ctrl.data.comments[8] }}
                span.no-data(ng-if="!ctrl.data.comments[8]") No Comments

      .manager-submissions(ng-class="{ 'open': $root.Forms.formListOpen, 'shadow': $root.Forms.formOpen }")

        header(flex layout="row")
          .details
            .name {{ $root.Forms.selectedUserEmail }}
            .submission {{ $root.Data.forms.byEvaluateeByStatus[ $root.Forms.selectedUserEmail ].completed.length }} Completed FCRs
          div(flex)
          .close(ng-click="$root.Forms.close()") Close

        md-divider

        div.scroll
          md-list.forms
            md-list-item(
              ng-repeat="form in $root.Data.forms.byEvaluateeByStatus[ $root.Forms.selectedUserEmail ].submitted"
              ng-click="$root.Forms.openForm(form.payload.evaluatee.id, form.payload.submissionId)"
              ng-class="{ 'active': $root.Forms.selectedFormId == form.payload.submissionId }"
              ng-if="$root.Data.forms.byEvaluateeByStatus[ $root.Forms.selectedUserEmail ].submitted && $root.Data.forms.byEvaluateeByStatus[ $root.Forms.selectedUserEmail ].submitted.length > 0"
              )
              i.material-icons.selected fiber_manual_record
              md-list-item-text
                .form-info In Review {{ form.payload.createdOn | tsFormat }}
                .evaluator Evaluated by {{ form.payload.evaluator.name }}
              i.material-icons.md-secondary open_in_new
              md-divider
            md-list-item(
              ng-repeat="form in $root.Data.forms.byEvaluateeByStatus[ $root.Forms.selectedUserEmail ].completed | orderBy: '-payload.timestamp'"
              ng-click="$root.Forms.openForm(form.payload.evaluatee.id, form.payload.submissionId)"
              ng-class="{ 'active': $root.Forms.selectedFormId == form.payload.submissionId }"
              ng-if="$root.Data.forms.byEvaluateeByStatus[ $root.Forms.selectedUserEmail ].completed && $root.Data.forms.byEvaluateeByStatus[ $root.Forms.selectedUserEmail ].completed.length > 0"
              )
              i.material-icons.selected fiber_manual_record
              md-list-item-text
                .form-info Completed {{ form.payload.timestamp | tsFormat }}
                .evaluator Evaluated by {{ form.payload.evaluator.name }}
              i.material-icons.md-secondary open_in_new
              md-divider

      .cover(ng-click="$root.Forms.close()" ng-class="{ 'show': $root.Forms.formListOpen }" )
